CREATE TABLE USERS(
	ID INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    HANDLE VARCHAR(18) NOT NULL,
    NAME_OF_USER VARCHAR(40),
    OVERALL_SENTIMENT VARCHAR(30)
);

CREATE TABLE TWEETS(
	ID INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
	USER_ID INT NOT NULL,
	ORIGINAL_TEXT VARCHAR(180) NOT NULL,
	USEFUL_TEXT VARCHAR(140),
	EMOJIS VARCHAR(140),
	HASHTAGS VARCHAR(140),
    SENTIMENT DOUBLE,
    IS_ANALYZED BOOLEAN,
    FOREIGN KEY (USER_ID) REFERENCES USERS(ID) ON DELETE CASCADE
);

CREATE TABLE EMOJIS(
	ID INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    EMOJI_CODE VARCHAR(50),
    EMOJI_STRING VARCHAR(100)
);

SELECT * FROM EMOJIS;
SELECT EMOJI_STRING FROM EMOJIS WHERE EMOJI_CODE = "\\xF0\\x9F\\x98\\x8A";

DROP TABLE EMOJIS;


CREATE TABLE SENTIMENTS(
	ID INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    SENTIMENT VARCHAR(30)
);

CREATE TABLE TWEET_SENTIMENT_MAP(
	ID INT PRIMARY KEY NOT NULL,
    TWEET_ID INT,
    SENTIMENT_ID INT,
    FOREIGN KEY (TWEET_ID) REFERENCES TWEETS(ID) ON DELETE CASCADE,
    FOREIGN KEY (SENTIMENT_ID) REFERENCES SENTIMENTS(ID) ON DELETE CASCADE
);

DROP TABLE TWEET_SENTIMENT_MAP;
#DROP TABLE SENTIMENT;
DROP TABLE TWEETS;
DROP TABLE USERS;

INSERT INTO USERS (HANDLE, NAME_OF_USER, OVERALL_SENTIMENT) VALUES ("cjungck", "Christian Jungck", "Positive");
#DELETE FROM USERS;
SELECT * FROM USERS;
SELECT ID FROM USERS WHERE HANDLE = "cjungck";
SELECT * FROM USERS WHERE HANDLE = "cjungck";

DELETE FROM TWEETS;
DELETE FROM USERS;

ALTER TABLE TWEETS ADD IS_ANALYZED BOOL;

INSERT INTO TWEETS (USER_ID, ORIGINAL_TEXT, IS_ANALYZED) VALUES ("1", "Hey look, Ma, I made a second Tweet!", FALSE);
SELECT * FROM TWEETS;
SELECT USERS.ID, USERS.HANDLE, USERS.FIRST_NAME, USERS.LAST_NAME, 
TWEETS.ID, TWEETS.ORIGINAL_TEXT, TWEETS.IS_ANALYZED
FROM TWEETS JOIN USERS ON TWEETS.USER_ID = USERS.ID
WHERE USERS.HANDLE = "cjungck";

INSERT INTO TWEETS (USER_ID, ORIGINAL_TEXT, IS_ANALYZED, SENTIMENT) VALUES (3, "Hey look a Tweet", 1, 3.1);

SELECT TWEETS.ID, TWEETS.ORIGINAL_TEXT, TWEETS.IS_ANALYZED, TWEETS.SENTIMENT
	FROM TWEETS JOIN USERS ON TWEETS.USER_ID = USERS.ID
	WHERE USERS.HANDLE = 'FoxNews' LIMIT 100;